<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<VBox alignment="TOP_CENTER" spacing="20.0" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.focusloop.controller.MainController" prefWidth="400.0" prefHeight="600.0" styleClass="root">
    <padding>
        <Insets bottom="30.0" left="30.0" right="30.0" top="30.0"/>
    </padding>

    <HBox alignment="CENTER_LEFT" spacing="10">
        <Text text="FocusLoop" styleClass="text-primary" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
        <Region HBox.hgrow="ALWAYS" />
        <Button fx:id="settingsButton" styleClass="settings-button" text="⚙"/>
    </HBox>

    <StackPane VBox.vgrow="ALWAYS">
        <!-- Setup View -->
        <VBox fx:id="setupView" spacing="20" alignment="CENTER">
            <VBox spacing="10">
                <Label text="집중 시간 (분)" styleClass="text-secondary"/>
                <Spinner fx:id="focusSpinner" editable="true" maxWidth="Infinity" styleClass="input-field"/>
            </VBox>
            
            <VBox spacing="10">
                <Label text="휴식 시간 (분)" styleClass="text-secondary"/>
                <Spinner fx:id="breakSpinner" editable="true" maxWidth="Infinity" styleClass="input-field"/>
            </VBox>
            
            <VBox spacing="10">
                <Label text="반복 횟수" styleClass="text-secondary"/>
                <Spinner fx:id="cyclesSpinner" editable="true" maxWidth="Infinity" styleClass="input-field"/>
            </VBox>

            <VBox spacing="10" alignment="TOP_LEFT">
                <Label text="프리셋" styleClass="text-secondary"/>
                <FlowPane fx:id="presetContainer" hgap="10" vgap="10" />
            </VBox>

            <Region VBox.vgrow="ALWAYS" />
            
            <Button fx:id="startButton" text="집중 시작" maxWidth="Infinity" styleClass="button-primary"/>
        </VBox>

        <!-- Timer View -->
        <VBox fx:id="timerView" spacing="30" alignment="CENTER" visible="false">
            <Label fx:id="statusBadge" text="집중 중" styleClass="badge-focus"/>
            
            <Text fx:id="timerText" text="00:00" styleClass="timer-text"/>
            
            <Label fx:id="cycleLabel" text="1 / 4 세트" styleClass="text-secondary"/>
            
            <HBox spacing="15" alignment="CENTER">
                <Button fx:id="pauseButton" text="일시정지" styleClass="button-secondary" prefWidth="100"/>
                <Button fx:id="skipButton" text="건너뛰기" styleClass="button-secondary" prefWidth="100"/>
            </HBox>
            
            <Button fx:id="stopButton" text="중지" styleClass="button-secondary" style="-fx-text-fill: -fx-error-color; -fx-border-color: -fx-error-color;" maxWidth="Infinity"/>
        </VBox>

        <!-- Settings Overlay -->
        <VBox fx:id="settingsOverlay" spacing="20" alignment="CENTER" visible="false" styleClass="settings-panel">
            <Label text="설정" styleClass="text-primary" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
            
            <CheckBox fx:id="soundCheckBox" text="시스템 알림 사용" selected="true" styleClass="text-primary"/>
            <CheckBox fx:id="autoNextCheckBox" text="다음 단계 자동 시작" styleClass="text-primary"/>
            
            <Region VBox.vgrow="ALWAYS" />
            <Button fx:id="closeSettingsButton" text="저장 및 닫기" maxWidth="Infinity" styleClass="button-primary"/>
        </VBox>
    </StackPane>

    <!-- Stats summary at bottom -->
    <HBox spacing="20" alignment="CENTER" style="-fx-padding: 10 0 0 0;">
        <VBox alignment="CENTER">
            <Text fx:id="todayFocusText" text="0분" styleClass="text-primary" style="-fx-font-weight: bold;"/>
            <Text text="오늘" styleClass="text-secondary" style="-fx-font-size: 10px;"/>
        </VBox>
        <VBox alignment="CENTER">
            <Text fx:id="weekFocusText" text="0시간" styleClass="text-primary" style="-fx-font-weight: bold;"/>
            <Text text="이번 주" styleClass="text-secondary" style="-fx-font-size: 10px;"/>
        </VBox>
    </HBox>
</VBox>
